{% extends "layouts/supervisorbase.html" %}

{% block title %} Supervisor Dashboard {% endblock %}

<!-- Specific CSS goes HERE -->
{% block stylesheets %}{% endblock stylesheets %}

{% block content %}

   <!-- [ Main Content ] start -->
    <div class="pcoded-main-container">
        <div class="pcoded-wrapper">

            <div class="pcoded-content">
                <div class="pcoded-inner-content">
                    <!-- [ breadcrumb ] start -->

                    <!-- [ breadcrumb ] end -->
                    <div class="main-body">
                        <div class="page-wrapper">
                                                
                            <!-- START of inserting tasks status dashboard -->
                                <div class="container">
                                    <h1 class="mt-4">Supervisor Dashboard</h1>                           
                                   <!-- supervisor_dashboard.html -->
                                
                                   <!--Start for Tasks Management-->
                                   <div class="row">
                                    <!--[ daily sales section ] start-->
                                    <div class="col-md-6 col-xl-4">
                                        <div class="card daily-sales">
                                            <div class="card-block">
                                                <h6 class="mb-4">Hi {{ user.username }} !</h6>
                                                <h6 class="mb-4">You have </h6>
                                                <div class="row d-flex align-items-center">
                                                    <div class="col-9">
                                                        <h3 class="f-w-300 d-flex align-items-center m-b-3"><i
                                                                class="feather icon-arrow-up text-c-green f-30 m-r-10"></i>
                                                            {{ numBlogs }}</h3>
                                                    </div>
    
                                                    <div class="col-3 text-right">
                                                        <p class="m-b-0">Closed Tasks</p>
                                                    </div>
                                                </div>
                                                {#                                            pasting additional section#}
                                                <h6 class="mb-4">Task completed in the Month</h6>
                                                <div class="row d-flex align-items-center">
                                                    <div class="col-9">
                                                        <h3 class="f-w-300 d-flex align-items-center m-b-3"><i
                                                                class="feather icon-arrow-up text-c-green f-30 m-r-10"></i>
                                                            {{ monthCount }} </h3>
                                                    </div>
    
                                                    <div class="col-3 text-right">
                                                        <p class="m-b-0">Tasks</p>
                                                    </div>
                                                </div>
    
                                                <div class="progress m-t-30" style="height: 7px;">
                                                    <div class="progress-bar progress-c-theme" role="progressbar"
                                                         style="width: 50%;" aria-valuenow="50" aria-valuemin="0"
                                                         aria-valuemax="100"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!--[ daily sales section ] end-->
                                    <!-- Start Add a new Task  button-->
                                    <div class="col-md-6 col-xl-4">
                                        <div class="card Monthly-sales">
                                            <div class="card-block">
                                                <h6 class="mb-4">Add a New Task</h6>
                                                <div class="row d-flex align-items-center">
                                                    <div class="col-9">
                                                        <a href="#" data-toggle="modal" data-target="#addTaskModal"
                                                           class="btn btn-sm btn-outline-primary">Add a New Task</a>
                                                    </div>
                                                    
                                                </div>
                                                <div class="progress m-t-30" style="height: 7px;">
                                                    <div class="progress-bar progress-c-theme2" role="progressbar"
                                                         style="width: 35%;" aria-valuenow="35" aria-valuemin="0"
                                                         aria-valuemax="100"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div
                                    
                                    <!-- End Add a new Task button -->
    
                                    <!-- End Add a Recurrent Task button -->
                                    <div class="col-md-6 col-xl-4">
                                        <div class="card Monthly-sales">
                                            <div class="card-block">
                                                <h6 class="mb-4">Add a Recurring Task</h6>
                                                <div class="row d-flex align-items-center">
                                                    <div class="col-9">
                                                        <a href="#" data-toggle="modal" data-target="#addRecurringTaskModal" class="btn btn-sm btn-outline-primary">Add a Recurring Task</a>
                                                    </div>
                                                </div>
                                                <div class="progress m-t-30" style="height: 7px;">
                                                    <div class="progress-bar progress-c-theme2" role="progressbar" style="width: 35%;" aria-valuenow="35" aria-valuemin="0" aria-valuemax="100"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- End Add a Recurrent Task button -->
                                   
                                    <!-- Add Personel Card Start-->
                                    <div class="col-md-6 col-xl-4">
                                        <div class="card Monthly-sales">
                                            <div class="card-block">
                                                <h6 class="mb-4">Add Personnel Profile</h6>
                                                <div class="row d-flex align-items-center">
                                                    <div class="col-9">
                                                        <button type="button" class="btn btn-sm btn-outline-primary" data-toggle="modal" data-target="#addUserModal">Add Personnel</button>
                                                    </div>
                                                </div>
                                                <div class="progress m-t-30" style="height: 7px;">
                                                    <div class="progress-bar progress-c-theme2" role="progressbar" style="width: 35%;" aria-valuenow="35" aria-valuemin="0" aria-valuemax="100"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- Add Personel Card End-->
                                     <!--[ Add Personel ] starts-->
                                     <div class="col-md-6 col-xl-4">
                                        <div class="card Monthly-sales">
                                            <div class="card-block">
                                                <h6 class="mb-4">Assign to Personel</h6>
                                                <div class="row d-flex align-items-center">
                                                    <div class="col-9">
                                                        <a href="#" data-toggle="modal" data-target="#assignTaskModal"
                                                        class="btn btn-sm btn-outline-primary"> Assign</a>
                                                    </div>
    
                                                    {#                                                <div class="col-3 text-right">#}
                                                    {#                                                    <p class="m-b-0">36%</p>#}
                                                    {#                                                </div>#}
                                                </div>
    
                                                <div class="progress m-t-30" style="height: 7px;">
                                                    <div class="progress-bar progress-c-theme2" role="progressbar"
                                                         style="width: 35%;" aria-valuenow="35" aria-valuemin="0"
                                                         aria-valuemax="100"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!--[ Add Personel ] end-->
                                    <!--[ year  sales section ] starts-->
                                    <div class="col-md-12 col-xl-4">
                                        <div class="card yearly-sales">
                                            <div class="card-block">
                                                <h6 class="mb-4">Yearly Sales</h6>
                                                <div class="row d-flex align-items-center">
                                                    <div class="col-9">
                                                        <h3 class="f-w-300 d-flex align-items-center  m-b-0"><i
                                                                class="feather icon-arrow-up text-c-green f-30 m-r-10"></i>$
                                                            8.638.32</h3>
                                                    </div>
                                                    <div class="col-3 text-right">
                                                        <p class="m-b-0">80%</p>
                                                    </div>
                                                </div>
                                                <div class="progress m-t-30" style="height: 7px;">
                                                    <div class="progress-bar progress-c-theme" role="progressbar"
                                                         style="width: 70%;" aria-valuenow="70" aria-valuemin="0"
                                                         aria-valuemax="100"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!--[ year  sales section ] end-->
    
    
                                </div>
                                <!-- [ Main Content ] end -->
                           
                                   <!--End of Task management-->

                                <!--Start of Task status Display-->

                                   <div class="container">
                                   <h3 class="mt-5 text-center p-3 bg-light text-dark rounded">
                                    Single Tasks Status
                                    </h3>

                                    <div class="row mt-4">
                                        <!-- Pending Tasks -->
                                        <div class="col-md-3">
                                            <h5>Pending Tasks</h5>
                                            <ul class="list-group" style="max-height: 200px; overflow-y: auto;">
                                                {% if tasks_pending %}
                                                    {% for task in tasks_pending %}
                                                        <li class="list-group-item {% if forloop.counter > 3 %}d-none{% endif %}">
                                                            <strong><a href="{% url 'task_detail' task.task_id %}">{{ task.task_name }}</a></strong><br>
                                                            Assigned to: {{ task.assigned_personnel.username }}
                                                        </li>
                                                    {% endfor %}
                                                    {% if tasks_pending|length > 3 %}
                                                        <li class="list-group-item text-center">
                                                            <a href="#" onclick="viewAll(this); return false;">View all</a>
                                                        </li>
                                                    {% endif %}
                                                {% else %}
                                                    <li class="list-group-item">No items to list</li>
                                                {% endif %}
                                            </ul>
                                            <small class="text-muted">Total: {{ tasks_pending|length }}</small>
                                        </div>
                                    
                                        <!-- Tasks In Progress -->
                                        <div class="col-md-3">
                                            <h5>Tasks In Progress</h5>
                                            <ul class="list-group" style="max-height: 200px; overflow-y: auto;">
                                                {% if tasks_in_progress %}
                                                    {% for task in tasks_in_progress %}
                                                        <li class="list-group-item {% if forloop.counter > 3 %}d-none{% endif %}">
                                                            <strong><a href="{% url 'task_detail' task.task_id %}">{{ task.task_name }}</a></strong><br>
                                                            Assigned to: {{ task.assigned_personnel.username }}
                                                        </li>
                                                    {% endfor %}
                                                    {% if tasks_in_progress|length > 3 %}
                                                        <li class="list-group-item text-center">
                                                            <a href="#" onclick="viewAll(this); return false;">View all</a>
                                                        </li>
                                                    {% endif %}
                                                {% else %}
                                                    <li class="list-group-item">No items to list</li>
                                                {% endif %}
                                            </ul>
                                            <small class="text-muted">Total: {{ tasks_in_progress|length }}</small>
                                        </div>
                                    
                                        <!-- Tasks On Hold -->
                                        <div class="col-md-3">
                                            <h5>Tasks On Hold</h5>
                                            <ul class="list-group" style="max-height: 200px; overflow-y: auto;">
                                                {% if tasks_on_hold %}
                                                    {% for task in tasks_on_hold %}
                                                        <li class="list-group-item {% if forloop.counter > 3 %}d-none{% endif %}">
                                                            <strong><a href="{% url 'task_detail' task.task_id %}">{{ task.task_name }}</a></strong><br>
                                                            Assigned to: {{ task.assigned_personnel.username }}
                                                        </li>
                                                    {% endfor %}
                                                    {% if tasks_on_hold|length > 3 %}
                                                        <li class="list-group-item text-center">
                                                            <a href="#" onclick="viewAll(this); return false;">View all</a>
                                                        </li>
                                                    {% endif %}
                                                {% else %}
                                                    <li class="list-group-item">No items to list</li>
                                                {% endif %}
                                            </ul>
                                            <small class="text-muted">Total: {{ tasks_on_hold|length }}</small>
                                        </div>
                                    
                                        <!-- Completed Tasks -->
                                        <div class="col-md-3">
                                            <h5>Completed Tasks</h5>
                                            <ul class="list-group" style="max-height: 200px; overflow-y: auto;">
                                                {% if tasks_completed %}
                                                    {% for task in tasks_completed %}
                                                        <li class="list-group-item {% if forloop.counter > 3 %}d-none{% endif %}">
                                                            <strong><a href="{% url 'task_detail' task.task_id %}">{{ task.task_name }}</a></strong><br>
                                                            Assigned to: {{ task.assigned_personnel.username }}
                                                        </li>
                                                    {% endfor %}
                                                    {% if tasks_completed|length > 3 %}
                                                        <li class="list-group-item text-center">
                                                            <a href="#" onclick="viewAll(this); return false;">View all</a>
                                                        </li>
                                                    {% endif %}
                                                {% else %}
                                                    <li class="list-group-item">No items to list</li>
                                                {% endif %}
                                            </ul>
                                            <small class="text-muted">Total: {{ tasks_completed|length }}</small>
                                        </div>
                                    
                                        <!-- Approved Tasks -->
                                        <div class="col-md-3">
                                            <h5>Approved Tasks</h5>
                                            <ul class="list-group" style="max-height: 200px; overflow-y: auto;">
                                                {% if tasks_approved %}
                                                    {% for task in tasks_approved %}
                                                        <li class="list-group-item {% if forloop.counter > 3 %}d-none{% endif %}">
                                                            <strong><a href="{% url 'task_detail' task.task_id %}">{{ task.task_name }}</a></strong><br>
                                                            Assigned to: {{ task.assigned_personnel.username }}
                                                        </li>
                                                    {% endfor %}
                                                    {% if tasks_approved|length > 3 %}
                                                        <li class="list-group-item text-center">
                                                            <a href="#" onclick="viewAll(this); return false;">View all</a>
                                                        </li>
                                                    {% endif %}
                                                {% else %}
                                                    <li class="list-group-item">No items to list</li>
                                                    {% endif %}
                                                </ul>
                                                <small class="text-muted">Total: {{ tasks_approved|length }}</small>
                                            </div>
                                        </div>
                                    
                                    
                                    
                                    
                                </div>                               
                                

                                    <!-- Start Listing the Reccuring Task CLient -->
                                                                  
                                    
                                </div>
                                <!-- Assigned Reccuring Task CLient -->
                                <h3 class="mt-5 text-center p-3 bg-light text-dark rounded">Recurrent Tasks Status</h3>
                                <!-- Recurring Tasks Section -->
                                <div class="row mt-4">
                                    <!-- In Progress RTasks -->
                                    <div class="col-md-3">
                                        <h4>In Progress RTasks</h4>
                                        <ul id="recurringtasks-in-progress-section" class="list-group" style="max-height: 200px; overflow-y: auto;">
                                            {% if recurring_tasks_in_progress %}
                                                {% for task in recurring_tasks_in_progress %}
                                                    <li class="list-group-item {% if forloop.counter > 3 %}d-none{% endif %}">
                                                        <a href="{% url 'client_recurring_tasks' task.client.user.username %}">{{ task.task_name }} - {{ task.client.user.username }}</a><br>
                                                        Assigned to: {{ task.assigned_personnel.username }}
                                                    </li>
                                                {% endfor %}
                                                {% if recurring_tasks_in_progress|length > 3 %}
                                                    <li class="list-group-item text-center">
                                                        <a href="#" onclick="viewAll('recurringtasks-in-progress-section'); return false;">View all</a>
                                                    </li>
                                                {% endif %}
                                            {% else %}
                                                <li class="list-group-item">No tasks in progress</li>
                                            {% endif %}
                                        </ul>
                                        <small class="text-muted">Total: {{ recurring_tasks_in_progress|length }}</small>
                                    </div>
                                
                                    <!-- On Hold RTasks -->
                                    <div class="col-md-3">
                                        <h4>On Hold RTasks</h4>
                                        <ul id="recurringtasks-on-hold-section" class="list-group" style="max-height: 200px; overflow-y: auto;">
                                            {% if recurring_tasks_on_hold %}
                                                {% for task in recurring_tasks_on_hold %}
                                                    <li class="list-group-item {% if forloop.counter > 3 %}d-none{% endif %}">
                                                        <a href="{% url 'client_recurring_tasks' task.client.user.username %}">{{ task.task_name }} - {{ task.client.user.username }}</a><br>
                                                        Assigned to: {{ task.assigned_personnel.username }}
                                                    </li>
                                                {% endfor %}
                                                {% if recurring_tasks_on_hold|length > 3 %}
                                                    <li class="list-group-item text-center">
                                                        <a href="#" onclick="viewAll('recurringtasks-on-hold-section'); return false;">View all</a>
                                                    </li>
                                                {% endif %}
                                            {% else %}
                                                <li class="list-group-item">No held tasks</li>
                                            {% endif %}
                                        </ul>
                                        <small class="text-muted">Total: {{ recurring_tasks_on_hold|length }}</small>
                                    </div>
                                
                                    <!-- Completed RTasks -->
                                    <div class="col-md-3">
                                        <h4>Completed RTasks</h4>
                                        <ul id="recurringtasks-completed-section" class="list-group" style="max-height: 200px; overflow-y: auto;">
                                            {% if recurring_tasks_completed %}
                                                {% for task in recurring_tasks_completed %}
                                                    <li class="list-group-item {% if forloop.counter > 3 %}d-none{% endif %}">
                                                        <a href="{% url 'client_recurring_tasks' task.client.user.username %}">{{ task.task_name }} - {{ task.client.user.username }}</a><br>
                                                        Assigned to: {{ task.assigned_personnel.username }}
                                                    </li>
                                                {% endfor %}
                                                {% if recurring_tasks_completed|length > 3 %}
                                                    <li class="list-group-item text-center">
                                                        <a href="#" onclick="viewAll('recurringtasks-completed-section'); return false;">View all</a>
                                                    </li>
                                                {% endif %}
                                            {% else %}
                                                <li class="list-group-item">No completed tasks</li>
                                            {% endif %}
                                        </ul>
                                        <small class="text-muted">Total: {{ recurring_tasks_completed|length }}</small>
                                    </div>
                                
                                    <!-- Approved RTasks -->
                                    <div class="col-md-3">
                                        <h4>Approved RTasks</h4>
                                        <ul id="recurringtasks-approved-section" class="list-group" style="max-height: 200px; overflow-y: auto;">
                                            {% if recurring_tasks_approved %}
                                                {% for task in recurring_tasks_approved %}
                                                    <li class="list-group-item {% if forloop.counter > 3 %}d-none{% endif %}">
                                                        <a href="{% url 'client_recurring_tasks' task.client.user.username %}">{{ task.task_name }} - {{ task.client.user.username }}</a><br>
                                                        Assigned to: {{ task.assigned_personnel.username }}
                                                    </li>
                                                {% endfor %}
                                                {% if recurring_tasks_approved|length > 3 %}
                                                    <li class="list-group-item text-center">
                                                        <a href="#" onclick="viewAll('recurringtasks-approved-section'); return false;">View all</a>
                                                    </li>
                                                {% endif %}
                                            {% else %}
                                                <li class="list-group-item">No approved tasks</li>
                                            {% endif %}
                                        </ul>
                                        <small class="text-muted">Total: {{ recurring_tasks_approved|length }}</small>
                                    </div>
                                </div>
                                
                                
                                
                                
                                                   
                                                   
                            
                                
                                                               

                            <!-- END of inserting tasks status dashboard -->

                            <!-- [ Main Content ] start -->
                          </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
    <!-- [ Main Content ] end -->

{% endblock content %}

<!-- Specific Page JS goes HERE  -->
{% block javascripts %}{% endblock javascripts %}
